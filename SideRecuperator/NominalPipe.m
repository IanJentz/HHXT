classdef NominalPipe
    %UNTITLED2 Summary of this class goes here
    %   Detailed explanation goes here
    
    properties
        T_schedule
        T_ID
        T_Ptangential
        T_Paxial
        T_thin
        unit_mult
        units
    end
    
    methods
        function obj = NominalPipe(unit_system)
            %UNTITLED2 Construct an instance of this class
            %   Detailed explanation goes here
            
            if nargin == 0
                obj.unit_mult = 1;
                obj.units = 'in';
            else
                switch unit_system
                    case {'in','imperial','english','nominal'}
                        obj.unit_mult = 1;
                        obj.units = 'in';
                    case {'m','SI'}
                        obj.unit_mult = 25.4e-3;
                        obj.units = 'm';
                    case {'mm'}
                        obj.unit_mult = 25.4;
                        obj.units = 'mm';
                    case {'cm'}
                        obj.unit_mult = 25.4e-1;
                        obj.units = 'cm';
                end
            end
            
            % build table of pipe schedules
            varNames = {'Nominal','OD','5s','5','10s','10','20','30','40s','40','60','80s','80','100','120','140','160','XXH'};
            varTypes = varNames; varUnits = varNames; 
            varTypes{1} = 'string'; varUnits{1} = 'in';
            for i = 2:length(varNames)
                varTypes{i} = 'double'; varUnits{i} = obj.units;
            end
            obj.T_schedule = table('Size',[35,length(varNames)],'VariableTypes',varTypes,'VariableNames',varNames);
            obj.T_schedule.Nominal = {'1/8';'1/4';'3/8';'1/2';'3/4';1;'1 1/4';'1 1/2';'2';'2 1/2';'3';'3 1/2';'4';'4 1/2';'5';'6';'7';'8';'9';'10';'11';'12';'14';'16';'18';'20';'24';'26';'28';'30';'32';'34';'36';'42';'48'};
            wall = [0.405000000000000,0,0.0350000000000000,0.0490000000000000,0.0490000000000000,0,0,0.0680000000000000,0.0680000000000000,0,0.0950000000000000,0.0950000000000000,0,0,0,0,0;0.540000000000000,0,0.0490000000000000,0.0650000000000000,0.0650000000000000,0,0,0.0880000000000000,0.0880000000000000,0,0.119000000000000,0.119000000000000,0,0,0,0,0;0.675000000000000,0,0.0490000000000000,0.0650000000000000,0.0650000000000000,0,0,0.0910000000000000,0.0910000000000000,0,0.126000000000000,0.126000000000000,0,0,0,0,0;0.840000000000000,0.0650000000000000,0.0650000000000000,0.0830000000000000,0.0830000000000000,0,0,0.109000000000000,0.109000000000000,0,0.147000000000000,0.147000000000000,0,0,0,0.187000000000000,0.294000000000000;1.05000000000000,0.0650000000000000,0.0650000000000000,0.0830000000000000,0.0830000000000000,0,0,0.113000000000000,0.113000000000000,0,0.154000000000000,0.154000000000000,0,0,0,0.218000000000000,0.308000000000000;1.31500000000000,0.0650000000000000,0.0650000000000000,0.109000000000000,0.109000000000000,0,0,0.133000000000000,0.133000000000000,0,0.179000000000000,0.179000000000000,0,0,0,0.250000000000000,0.358000000000000;1.66000000000000,0.0650000000000000,0.0650000000000000,0.109000000000000,0.109000000000000,0,0,0.140000000000000,0.140000000000000,0,0.191000000000000,0.191000000000000,0,0,0,0.250000000000000,0.382000000000000;1.90000000000000,0.0650000000000000,0.0650000000000000,0.109000000000000,0.109000000000000,0,0,0.145000000000000,0.145000000000000,0,0.200000000000000,0.200000000000000,0,0,0,0.281000000000000,0.400000000000000;2.37500000000000,0.0650000000000000,0.0650000000000000,0.109000000000000,0.109000000000000,0,0,0.154000000000000,0.154000000000000,0,0.218000000000000,0.218000000000000,0,0,0,0.343000000000000,0.436000000000000;2.87500000000000,0.0830000000000000,0.0830000000000000,0.120000000000000,0.120000000000000,0,0,0.203000000000000,0.203000000000000,0,0.276000000000000,0.276000000000000,0,0,0,0.375000000000000,0.552000000000000;3.50000000000000,0.0830000000000000,0.0830000000000000,0.120000000000000,0.120000000000000,0,0,0.216000000000000,0.216000000000000,0,0.300000000000000,0.300000000000000,0,0,0,0.437000000000000,0.600000000000000;4,0.0830000000000000,0.0830000000000000,0.120000000000000,0.120000000000000,0,0,0.226000000000000,0.226000000000000,0,0.318000000000000,0.318000000000000,0,0,0,0,0.636000000000000;4.50000000000000,0.0830000000000000,0.0830000000000000,0.120000000000000,0.120000000000000,0,0,0.237000000000000,0.237000000000000,0.281000000000000,0.337000000000000,0.337000000000000,0,0.437000000000000,0,0.531000000000000,0.674000000000000;5,0,0,0,0,0,0,0.247000000000000,0,0,0.355000000000000,0,0,0,0,0,0.710000000000000;5.56300000000000,0.109000000000000,0.109000000000000,0.134000000000000,0.134000000000000,0,0,0.258000000000000,0.258000000000000,0,0.375000000000000,0.375000000000000,0,0.500000000000000,0,0.625000000000000,0.750000000000000;6.62500000000000,0.109000000000000,0.109000000000000,0.134000000000000,0.134000000000000,0,0,0.280000000000000,0.280000000000000,0,0.432000000000000,0.432000000000000,0,0.562000000000000,0,0.718000000000000,0.864000000000000;7.62500000000000,0,0,0,0,0,0,0.301000000000000,0,0,0.500000000000000,0,0,0,0,0,0.875000000000000;8.62500000000000,0.109000000000000,0.109000000000000,0.148000000000000,0.148000000000000,0.250000000000000,0.277000000000000,0.322000000000000,0.322000000000000,0.406000000000000,0.500000000000000,0.500000000000000,0.593000000000000,0.718000000000000,0.812000000000000,0.906000000000000,0.875000000000000;9.62500000000000,0,0,0,0,0,0,0.342000000000000,0,0,0.500000000000000,0,0,0,0,0,0;10.7500000000000,0.134000000000000,0.134000000000000,0.165000000000000,0.165000000000000,0.250000000000000,0.307000000000000,0.365000000000000,0.365000000000000,0.500000000000000,0.500000000000000,0.593000000000000,0.718000000000000,0.843000000000000,1,1.12500000000000,0;11.7500000000000,0,0,0,0,0,0,0.375000000000000,0,0,0.500000000000000,0,0,0,0,0,0;12.7500000000000,0.156000000000000,0.165000000000000,0.180000000000000,0.180000000000000,0.250000000000000,0.330000000000000,0.375000000000000,0.406000000000000,0.562000000000000,0.500000000000000,0.687000000000000,0.843000000000000,1,1.12500000000000,1.31200000000000,0;14,0.156000000000000,0,0.188000000000000,0.250000000000000,0.312000000000000,0.375000000000000,0.375000000000000,0.437000000000000,0.593000000000000,0.500000000000000,0.750000000000000,0.937000000000000,1.09300000000000,1.25000000000000,1.40600000000000,0;16,0.165000000000000,0,0.188000000000000,0.250000000000000,0.312000000000000,0.375000000000000,0.375000000000000,0.500000000000000,0.656000000000000,0.500000000000000,0.843000000000000,1.03100000000000,1.21800000000000,1.43700000000000,1.59300000000000,0;18,0.165000000000000,0,0.188000000000000,0.250000000000000,0.312000000000000,0.437000000000000,0.375000000000000,0.562000000000000,0.750000000000000,0.500000000000000,0.937000000000000,1.15600000000000,1.37500000000000,1.56200000000000,1.78100000000000,0;20,0.188000000000000,0,0.218000000000000,0.250000000000000,0.375000000000000,0.500000000000000,0.375000000000000,0.593000000000000,0.812000000000000,0.500000000000000,1.03100000000000,1.28000000000000,1.50000000000000,1.75000000000000,1.96800000000000,0;24,0.218000000000000,0,0.250000000000000,0.250000000000000,0.375000000000000,0.562000000000000,0.375000000000000,0.687000000000000,0.968000000000000,0.500000000000000,1.21800000000000,1.53100000000000,1.81200000000000,2.06200000000000,2.34300000000000,0;26,0,0,0,0.312000000000000,0.500000000000000,0,0.375000000000000,0,0,0.500000000000000,0,0,0,0,0,0;28,0,0,0,0.312000000000000,0.500000000000000,0.625000000000000,0.375000000000000,0,0,0,0,0,0,0,0,0;30,0.250000000000000,0,0.312000000000000,0.312000000000000,0.500000000000000,0.625000000000000,0.375000000000000,0,0,0.500000000000000,0,0,0,0,0,0;32,0,0,0,0.312000000000000,0.500000000000000,0.625000000000000,0.375000000000000,0.688000000000000,0,0.500000000000000,0,0,0,0,0,0;34,0,0,0,0.312000000000000,0.500000000000000,0.625000000000000,0.375000000000000,0.688000000000000,0,0,0,0,0,0,0,0;36,0,0,0,0.312000000000000,0,0.625000000000000,0.375000000000000,0.750000000000000,0,0.500000000000000,0,0,0,0,0,0;42,0,0,0,0,0,0,0.375000000000000,0,0,0.500000000000000,0,0,0,0,0,0;48,0,0,0,0,0,0,0.375000000000000,0,0,0.500000000000000,0,0,0,0,0,0];
            wall = obj.unit_mult*wall;
            wall(wall==0) = NaN;
            obj.T_schedule(1:end,2:end) = array2table(wall);
            obj.T_schedule.Properties.VariableUnits = varUnits;
            
          
            
            % determine inner diameter from outer diameter and schedule
            obj.T_ID = obj.T_schedule;
            for i = 1:size(obj.T_schedule,1)
                obj.T_ID(i,3:end) = array2table( obj.T_ID.OD(i) - 2*obj.T_schedule{i,3:end} );
            end
            
            % determine if thin-walled assumptions can be used
            % (thickness less than one tenth of inner radius)
            obj.T_thin = obj.T_schedule;
            for i = 1:size(obj.T_schedule,1)
                obj.T_thin(i,3:end) = array2table( 20*obj.T_schedule{i,3:end} > obj.T_ID{i,3:end} );
            end
            
            % determine the ratio of hoop stress to internal pressure
            obj.T_Ptangential = obj.T_schedule;
            for i = 1:size(obj.T_schedule,1)
                obj.T_Ptangential(i,3:end) = array2table( obj.T_ID{i,3:end} ./ (2*obj.T_schedule{i,3:end}) );
            end
            
            % determine the ratio of axial stress to internal pressure
            obj.T_Paxial = obj.T_schedule;
            for i = 1:size(obj.T_schedule,1)
                obj.T_Paxial(i,3:end) = array2table( (obj.T_ID{i,3:end}.^2) ./ (obj.T_ID.OD(i)^2 - obj.T_schedule{i,3:end}.^2) );
            end
            
            
        end
        
        function outputArg = method1(obj,inputArg)
            %METHOD1 Summary of this method goes here
            %   Detailed explanation goes here
            outputArg = obj.Property1 + inputArg;
        end
    end
end

